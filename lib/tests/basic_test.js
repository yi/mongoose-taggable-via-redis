// Generated by CoffeeScript 1.6.3
/*
# test for basic
*/


(function() {
  var MODEL_NAME, db, mongoose, schema, should, taggable;

  should = require("should");

  mongoose = require('mongoose');

  taggable = require("../mongoose-taggable-via-redis");

  MODEL_NAME = "Record";

  db = void 0;

  schema = void 0;

  describe("test basic", function() {
    before(function(done) {
      mongoose.connect("mongodb://localhost/test");
      return mongoose.connection.once("connected", function(err) {
        if (err != null) {
          return done(err);
        }
        schema = new mongoose.Schema({}, {
          versionKey: false
        });
        schema.add({
          _id: String,
          name: String,
          createdAt: Date
        });
        schema.plugin(taggable, {
          limit: 5
        });
        mongoose.model(MODEL_NAME, schema);
        return done();
      });
    });
    before(function(done) {
      mongoose.model(MODEL_NAME).remove(done);
    });
    return before(function(done) {
      var arr, i;
      arr = [];
      i = 100;
      while (i >= 1) {
        arr.push(i);
        i--;
      }
      async.each(arr, (function(i, cb) {
        var obj;
        obj = {
          _id: (Date.now() + i).toString(36),
          name: "paginate_" + i,
          createdAt: new Date().setDate(new Date().getDate() - i)
        };
        mongoose.model(MODEL_NAME)(obj).save(cb);
      }), done);
      return;
      return describe("basic", function() {
        return it("should", function() {});
      });
    });
  });

}).call(this);
